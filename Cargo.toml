[package]
name = "clash-verge-service-ipc"
version = "0.1.0"
edition = "2024"
authors = ["Tunglies"]
license = "GPL-3.0"

[lib]
name = "clash_verge_service_ipc"
path = "src/lib.rs"

[[bin]]
name = "clash-verge-service-ipc"
path = "src/main.rs"
required-features = ["standalone"]

[features]
standalone = ["kode-bridge/server"]
default = []

[dependencies.kode-bridge]
version = "0.2.1"
default-features = false

[dependencies.once_cell]
version = "1.21.3"
features = ["parking_lot"]

[dependencies]
anyhow = "1.0.100"
hex = "0.4.3"
hmac = "0.12.1"
http = "1.3.1"
parking_lot = "0.12.4"
serde = "1.0.219"
serde_json = "1.0.143"
sha2 = "0.10.9"
strum = "0.27.2"
strum_macros = "0.27.2"
tokio = "1.47.1"
tracing = "0.1.41"
tracing-subscriber = "0.3.20"

[dev-dependencies]
kode-bridge = { version = "0.2.1", default-features = false, features = ["server","client"] }

[profile.release]
panic = "abort"
lto = "thin"
opt-level = 3
codegen-units = 1
